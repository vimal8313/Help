var rs={settings:{cookieLifetime:36E7,defaultSpeedValue:100,defaultSpeed:"medium",defaultSync:"wordsent",defaultPopup:"iconon",reloadPage:!1,sentColor:"#beffd6",textColor:"#000000",useCloudService:!0,usePopupButton:!0,usePopupPlayer:!0,useReadspeakerIcon:!1,usePost:!1,wordColor:"#a4cbff",appserverhost:"app.readspeaker.com",domain:"readspeaker.com",subdomain:"app",region:".eu",rscall:null,onclick:'readpage(this.href,"rs_popup_player"); return false;',protocol:document.location.protocol||"http:",rsent:"rsent",
version:"1.1e-embhl",flash:{allowScriptAccess:"always",height:"20",params:"&autoplay=1&rlang=nl&rskin=bump&time_format=ms",popupHeight:"20",popupWidth:"60",width:"250"},imageSrc:{cloud:{arrowSrc:"/graphic/default/images/rs_embhl_arrow_small.gif",closeSrc:"/graphic/default/images/rs_player_close_13px.png",flashSrc:"/flash/readspeaker.swf",popupSrc:"/graphic/default/buttons/icon_16px.gif",settingsSrc:"/graphic/default/images/rs_embhl_wrench_13px.png",playSrc:"/graphic/default/images/rs_player_play_13px.png",
playInactiveSrc:"/graphic/default/images/rs_player_play_inactive_13px.png",pauseSrc:"/graphic/default/images/rs_player_pause_13px.png",pauseInactiveSrc:"/graphic/default/images/rs_player_pause_inactive_13px.png",stopSrc:"/graphic/default/images/rs_player_stop_13px.png",stopInactiveSrc:"/graphic/default/images/rs_player_stop_inactive_13px.png",iconSrc:"/graphic/default/images/rs_player_icon_16px.gif"},media:{arrowSrc:"/images/enterprise/default/rs_arrow.gif",closeSrc:"/images/enterprise/default/close.png",
flashSrc:"/flash/readspeaker20.swf",popupSrc:"/images/buttons/listen_icons/icon_16px.gif",settingsSrc:"/images/enterprise/default/wrench.png",playSrc:"/images/enterprise/default/play.png",playInactiveSrc:"/images/enterprise/default/play2.png",pauseSrc:"/images/enterprise/default/pause.png",pauseInactiveSrc:"/images/enterprise/default/pause2.png",stopSrc:"/images/enterprise/default/stop.png",stopInactiveSrc:"/images/enterprise/default/stop2.png",iconSrc:"/images/buttons/listen_icons/icon_16px.gif"}}},
vars:{thespeed:100,thesync:"none",newhtml:"",restoreHTML:[],readID:[],currentRestoreHTML:null,currentReadID:null,currentPlayerID:null,previousPlayerID:null,previousSync:null,STATE:{CURRENT:0,NOT_READY:0,READY:1,PLAYING:2,CLOSE:3,USER_SELECTION:4,PLAYING_NO_SELECTION:5,PLAYING_USER_SELECTION:6,SETTINGS_CHANGED_PLAYING_NO_SELECTION:7,SETTINGS_CHANGED_PLAYING_USER_SELECTION:8,USER_SELECTION_WHILE_PLAYING_NO_SELECTION:9,USER_SELECTION_WHILE_PLAYING_USER_SELECTION:10},sel:{selectedString:"",selhtml:"",
selectedRange:null,selectedWordsRange:[],bmindex:1,sentbmindex:0,seltexttimes:0,startofsentence:1,inc:0,startNode:null,endNode:null,startOffset:null,endOffset:null,firstrun:1,globalcount:null,oldwordhl_FF:[],oldwordhlclass_FF:[],oldsenthl_FF:[],oldsenthlclass_FF:[],oldwordhlrange_IE:[],oldwordhlbackcol_IE:[],oldwordhlforecol_IE:[],oldwordhl_IE:[],oldwordhlclass_IE:[],oldsenthlrange_IE:[],oldsenthlbackcol_IE:[],oldsenthlforecol_IE:[],oldsenthl_IE:[],oldsenthlclass_IE:[],exludednodes:"table tr select option textarea ul ol dl thead tbody tfoot colgroup script map optgroup".split(" ")}},
data:{params:null,images:null,userAgent:null,phrases:{closeplayer:"Speler afsluiten",fast:"Hoog",hide:"Verberg",highlightingoptions:"Highlighting optie",listentoselectedtext:"Luister naar de geselecteerde tekst",medium:"Gemiddeld",nohighlighting:"Geen highlighting",nosound:"Geen geluid?",pause:"Pauze",playerwidth:"335",play:"Afspelen",popupbutton:"Popup-knop",sentonly:"Alleen zin",settings:"Instellingen",show:"Toon",slow:"Laag",speechenabled:"Speech-enabled by <a href='http://www.readspeaker.com/nl/?ref="+
encodeURIComponent(document.location.href)+"' target='_blank'>ReadSpeaker</a>",speed:"Snelheid",stop:"Stop",volume:"Volume",wordonly:"Alleen woord",wordsent:"Woord en zin"},setParams:function(a){for(var b={},c="",d="",c="",a=a.split("?")[1].split(/[;&]/),e=0;e<a.length;e++)if((c=a[e].split("="))&&2==c.length)d=unescape(c[0]),c=unescape(c[1]),c=c.replace(/\+/g," "),"url"==d&&(0==c.length&&(c=document.location.href),c=encodeURIComponent(c)),b[d]=c;b.rsjs_ver=rs.settings.version;this.params=b},setImages:function(){var a=
{},b="",c=rs.settings.region||".eu",d=rs.settings.useCloudService&&"https"!=rs.settings.protocol?"cloud":"media",e=rs.settings.imageSrc[d],f;for(f in e)e.hasOwnProperty(f)&&(b=-1!=e[f].indexOf("://")?"":"cloud"==d?"http://f1"+c+".readspeaker.com":rs.settings.protocol+"//media.readspeaker.com",a[f]=b+e[f]);this.images=a},setUserAgent:function(){document.selection?this.userAgent="IE":(-1<navigator.userAgent.toLowerCase().indexOf("iphone")||-1<navigator.userAgent.toLowerCase().indexOf("ipad")||-1<navigator.userAgent.toLowerCase().indexOf("ipod"))&&
-1<navigator.vendor.toLowerCase().indexOf("apple")?(this.userAgent="IOS",rs.settings.usePopupButton=!1):-1<navigator.userAgent.toLowerCase().indexOf("android")?(-1<navigator.userAgent.toLowerCase().indexOf("chrome")&&(this.userAgent="IOS"),rs.settings.usePopupButton=!1):this.userAgent="OTHER"},getImage:function(a){return this.images&&this.images[a]&&void 0!==this.images[a]?this.images[a]:""},getParam:function(a){return this.params&&this.params[a]&&void 0!==this.params[a]?this.params[a]:null},getParams:function(){return this.params},
getPhrase:function(a){return this.phrases&&this.phrases[a]&&void 0!==this.phrases[a]?this.phrases[a]:""},getRSCall:function(a){var a=a||{},b=rs.settings.protocol+"//"+rs.settings.appserverhost+"/cgi-bin/"+rs.settings.rsent+"?",c={},d;for(d in this.params)!1!=this.params.hasOwnProperty(d)&&("customerid"==d?b+=d+"="+this.params[d]:c[d]=this.params[d]);for(d in a)!1!=a.hasOwnProperty(d)&&(c[d]=a[d]);for(d in c)!1!=c.hasOwnProperty(d)&&(b="customerid"==d?b+(d+"="+c[d]):b+("&"+d+"="+c[d]));return b},getUserAgent:function(){return this.userAgent}},
init:function(a){rs.vars.STATE.CURRENT!=rs.vars.STATE.NOT_READY?rs.data.setParams(a):(rs.data.setUserAgent(),rs.getRsentInfo(),rs.data.setImages(),rs.createStylesheet(),rs.vars.STATE.CURRENT=rs.vars.STATE.READY)},getRsentInfo:function(){for(var a=RegExp(".+://"+rs.settings.subdomain+"(.[a-z]{2})?."+rs.settings.domain+".+","i"),b=document.getElementsByTagName("A"),c=[],d="",e=0;e<b.length;e++)c[e]=b[e];for(b=0;b<c.length;b++)if(c[b].getAttribute("href")&&a.test(c[b].getAttribute("href"))&&"rsSaveBtn"!=
c[b].id){d=0<c[b].getAttribute("href").replace(a,"$1").length?c[b].getAttribute("href").replace(a,"$1"):"";rs.popup.buttonExists=!0;!rs.settings.useReadspeakerIcon&&(c[b].getElementsByTagName("img")[0]&&c[b].getElementsByTagName("img")[0].src&&0<c[b].getElementsByTagName("img")[0].src.length)&&(rs.settings.imageSrc.popupSrc=c[b].getElementsByTagName("img")[0].src);rs.settings.rscall=c[b].getAttribute("href");for(a=0;a<c[b].attributes.length;a++)if("onclick"==c[b].attributes[a].nodeName.toLowerCase()&&
0<c[b].attributes[a].nodeValue.length&&!1==rs.settings.usePopupPlayer||"IOS"==rs.data.getUserAgent())rs.settings.onclick=c[b].attributes[a].nodeValue;break}rs.settings.appserverhost=rs.settings.subdomain+d+"."+rs.settings.domain;rs.settings.region=d;rs.settings.useCloudService&&(rs.imagehost="f1"+rs.settings.region+"."+rs.settings.domain)},readpage:function(a,b){rs.init(a);rs.data.setParams(a);rs.getreadids();rs.start(a,b)},start:function(a,b){rs.vars.sel.globalcount=0;rs.popup.time&&(clearTimeout(rs.popup.time),
rs.popup.setVisibility());rs.vars.currentReadID=rs.data.getParam("readid");rs.data.getParam("speed")&&(rs.settings.defaultSpeedValue=parseInt(rs.data.getParam("speed")),a=a.replace(/speed=[^&]+/gi,""));rs.vars.thespeed=rs.convertSpeed(rs.loadSettings("ReadSpeakerHLspeed"));rs.vars.previousSync=rs.vars.thesync;rs.vars.thesync=rs.loadSettings("ReadSpeakerHL");if(null===rs.vars.thesync||""===rs.vars.thesync)rs.vars.thesync=rs.settings.defaultSync;rs.vars.currentPlayerID=b;if(null!==rs.vars.previousPlayerID){var c=
null;if(c=document.getElementById(rs.vars.previousPlayerID))c.innerHTML="",c.style.display="none"}rs.vars.previousPlayerID=rs.vars.currentPlayerID;rs.vars.sel.selectedString&&0<rs.vars.sel.selectedString.length||rs.vars.sel.selhtml&&0<rs.vars.sel.selhtml.length&&rs.vars.STATE.CURRENT==rs.vars.STATE.SETTINGS_CHANGED_PLAYING_USER_SELECTION?(rs.cleanup(),rs.vars.sel.selectedString&&0<rs.vars.sel.selectedString.length&&(rs.vars.sel.selhtml=rs.selectRange()),document.selection&&document.execCommand("Unselect"),
rs.vars.STATE.CURRENT=rs.vars.STATE.PLAYING_USER_SELECTION):(rs.vars.STATE.CURRENT=rs.vars.STATE.PLAYING_NO_SELECTION,("none"!=rs.vars.previousSync||"none"!=rs.vars.thesync)&&rs.cleanup(),rs.settings.usePost&&null!==rs.vars.currentReadID&&(c=document.getElementById(rs.vars.currentReadID),null!==c&&(rs.vars.currentRestoreHTML=c.innerHTML)));"IOS"==rs.data.getUserAgent()?rs.html5.player(a):"rs_popup_player"==rs.vars.currentPlayerID?rs.popup.player(a):rs.player(a);rs.vars.sel.selectedString=""},player:function(a){var b=
{};if(rs.vars.STATE.CURRENT!=rs.vars.STATE.PLAYING_NO_SELECTION){b.audioformat="flv";b.speed=rs.vars.thespeed;b.sync="user";b.syncalignuser=rs.vars.thesync;var c=encodeURIComponent(rs.issuePOST(a,rs.vars.sel.selhtml,b)),b={audioformat:"mp3"};b.speed=rs.vars.thespeed;var d=rs.issuePOST(a,rs.vars.sel.selhtml,b)}else rs.settings.usePost?(b.audioformat="flv",b.sync=rs.vars.thesync,b.speed=rs.vars.thespeed,c=encodeURIComponent(rs.issuePOST(a,"<div id='"+rs.vars.currentReadID+"'>"+rs.vars.currentRestoreHTML+
"</div>",b)),b={audioformat:"mp3"},b.speed=rs.vars.thespeed,d=rs.issuePOST(a,"<div id='"+rs.vars.currentReadID+"'>"+rs.vars.currentRestoreHTML+"</div>",b)):(b.audioformat="flv",b.speed=rs.vars.thespeed,b.sync=rs.vars.thesync,c=encodeURIComponent(rs.data.getRSCall(b)),b={audioformat:"mp3"},b.speed=rs.vars.thespeed,d=rs.data.getRSCall(b));b="<div id='rs_playerarea'>"+("<div style='margin-bottom: 2px; width: 100%; height: "+rs.settings.flash.height+"px;'><span style='position: absolute; top: 0px; left: 0px;'><object id='rsPlayer' "+
(document.selection?"classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'":"type='application/x-shockwave-flash' data='"+rs.data.getImage("flashSrc")+"?flv="+c+rs.settings.flash.params+"&text_play="+rs.data.getPhrase("play")+"&text_pause="+rs.data.getPhrase("pause")+"&text_stop="+rs.data.getPhrase("stop")+"&text_vol="+rs.data.getPhrase("volume")+"'")+" style='height:"+rs.settings.flash.height+"px; width:"+rs.settings.flash.width+"px;'>");b+="<param name='movie' value='"+rs.data.getImage("flashSrc")+
"?flv="+c+rs.settings.flash.params+"&text_play="+rs.data.getPhrase("play")+"&text_pause="+rs.data.getPhrase("pause")+"&text_stop="+rs.data.getPhrase("stop")+"&text_vol="+rs.data.getPhrase("volume")+"'>";b=b+"<param name='quality' value='high'><param name='autostart' value='true'>"+("<param name='allowScriptAccess' value='"+rs.settings.flash.allowScriptAccess+"'><param name='bgcolor' value='#FFFFFF'>");b+="<param name='loop' value='false'></object></span>";b+="<span style='position: absolute; top: 4px; right: 4px;'><a style='border-style: none;' href='JavaScript:void(0);' onclick='rs.closepage(\""+
rs.vars.currentPlayerID+"\");return false'><img id='closebr' src='"+rs.data.getImage("closeSrc")+"' alt='"+rs.data.getPhrase("closeplayer")+"' title='"+rs.data.getPhrase("closeplayer")+"'></a></span></div>";b+="<div id='bottomlinks'><a href='JavaScript:void(0);' class='rs_settings' onclick='rs.showcontrols(\""+a+'","'+rs.vars.currentPlayerID+"\");return false'>"+rs.data.getPhrase("settings")+"</a> | <a id='rsSaveBtn' href='"+d+"' target='rs' onclick='rs.removeiFrames(); return true;'>"+rs.data.getPhrase("nosound")+
"</a> | "+rs.data.getPhrase("speechenabled")+"</div>";b+="<div id='controls'></div>";b+="</div>";if(a=document.getElementById(rs.vars.currentPlayerID))a.innerHTML=b,a.style.display="block"},getreadids:function(){if(0===rs.vars.readID.length){for(var a=document.getElementsByTagName("A"),b=0;b<a.length;b++)if(a[b].getAttribute("href")&&-1!=a[b].getAttribute("href").indexOf(rs.settings.appserverhost+"/cgi-bin/"+rs.settings.rsent)&&"rsSaveBtn"!=a[b].id&&"rs_selimg"!=a[b].id){var c=a[b].getAttribute("href").match(/readid=[^&]+/gi);
c&&(c=c[0].replace("readid=",""),rs.vars.readID.push(c))}if(0<rs.vars.readID.length){a=null;for(b=0;b<rs.vars.readID.length;b++)(a=document.getElementById(rs.vars.readID[b]))&&rs.vars.restoreHTML.push(a.innerHTML)}}},convertSpeed:function(a){switch(a){case "slow":return rs.settings.defaultSpeedValue-25;case "medium":return rs.settings.defaultSpeedValue;case "fast":return rs.settings.defaultSpeedValue+25;default:return rs.settings.defaultSpeedValue}},closepage:function(a){"IOS"==rs.data.getUserAgent()&&
rs.html5.controls.stop();if(a=document.getElementById(a))a.innerHTML="",a.style.display="none";rs.vars.STATE.CURRENT=rs.vars.STATE.CLOSE;(a=document.getElementById(rs.vars.currentReadID))&&-1<a.className.toLowerCase().indexOf("rs_reload")||rs.settings.reloadPage?setTimeout("location.reload(true);",500):(setTimeout("rs.cleanup();rs.vars.currentRestoreHTML=null;",500),document.getElementById("rs_selimg")&&document.body.removeChild(document.getElementById("rs_selimg")),document.getElementById("rs_popup_player")&&
document.body.removeChild(document.getElementById("rs_popup_player")))},rshlexit:function(){setTimeout("rs.cleanup();",500)},saveSettings:function(a,b,c){c=parseInt(eval(c));if("NaN"==c+"")tmpdate="";else{var d=new Date;d.setTime(d.getTime()+c);d=d.toGMTString();tmpdate="; expires="+d}document.cookie=a+"="+escape(b)+tmpdate},loadSettings:function(a){ckarr=document.cookie;cks=ckarr.split("; ");for(i=0;i<cks.length;i++){cknameval=cks[i].split("=");for(j=0;j<cknameval.length;j++)if(cknameval[j]==a)return unescape(cknameval[j+
1])}return""},setstyle:function(a){-1<a.indexOf("icon")?rs.saveSettings("ReadSpeakerHLicon",a,rs.settings.cookieLifetime):"slow"==a||"medium"==a||"fast"==a?rs.saveSettings("ReadSpeakerHLspeed",a,rs.settings.cookieLifetime):rs.saveSettings("ReadSpeakerHL",a,rs.settings.cookieLifetime);a=document.getElementById("controls");null!==a&&(a.innerHTML="")},showcontrols:function(a,b){var c=document.getElementById("controls");if(null!==c&&""!=c.innerHTML)return c.innerHTML="",c.style.display="none",!1;var c=
rs.loadSettings("ReadSpeakerHL"),d=rs.loadSettings("ReadSpeakerHLicon"),e=rs.loadSettings("ReadSpeakerHLspeed");""==c&&(c=rs.settings.defaultSync);""==d&&(d=rs.settings.usePopupButton?rs.settings.defaultPopup:"iconoff");""==e&&(e=rs.settings.defaultSpeed);thestring="<div id='rspopup'><fieldset class='rs_block'><legend>"+rs.data.getPhrase("highlightingoptions")+"</legend><ul>";thestring+="<li class=";"wordsent"==c&&(thestring+="'rs_active'");thestring+="><a href='JavaScript:void(0);' onclick='rs.changeSettings(\""+
a+'","'+b+'","wordsent");return false;\'>'+rs.data.getPhrase("wordsent")+"</a></li>";thestring+="<li class=";"sent"==c&&(thestring+="'rs_active'");thestring+="><a href='JavaScript:void(0);' onclick='rs.changeSettings(\""+a+'","'+b+'","sent");return false;\'>'+rs.data.getPhrase("sentonly")+"</a></li>";thestring+="<li class=";"word"==c&&(thestring+="rs_active");thestring+="><a href='JavaScript:void(0);' onclick='rs.changeSettings(\""+a+'","'+b+'","word");return false;\'>'+rs.data.getPhrase("wordonly")+
"</a></li>";thestring+="<li class=";"none"==c&&(thestring+="rs_active");thestring+="><a href='JavaScript:void(0);' onclick='rs.changeSettings(\""+a+'","'+b+'","none");return false;\'>'+rs.data.getPhrase("nohighlighting")+"</a></li>";thestring+="</ul></fieldset>";rs.settings.usePopupButton&&(thestring+="<fieldset class='rs_block'><legend>"+rs.data.getPhrase("popupbutton")+"</legend><ul>",thestring+="<li class=","iconon"==d&&(thestring+="rs_active "),thestring+="><a href='JavaScript:void(0);' onclick='rs.changeSettings(\""+
a+'","'+b+'","iconon");return false;\'>'+rs.data.getPhrase("show")+"</a></li>",thestring+="<li class=","iconoff"==d&&(thestring+="rs_active "),thestring+="><a href='JavaScript:void(0);' onclick='rs.changeSettings(\""+a+'","'+b+'","iconoff");return false;\'>'+rs.data.getPhrase("hide")+"</a></li>",thestring+="</ul></fieldset>");thestring+="<fieldset class='rs_block'><legend>"+rs.data.getPhrase("speed")+"</legend><ul>";thestring+="<li class=";"slow"==e&&(thestring+="rs_active ");thestring+="><a href='JavaScript:void(0);' onclick='rs.changeSettings(\""+
a+'","'+b+'","slow");return false;\'>'+rs.data.getPhrase("slow")+"</a></li>";thestring+="<li class=";"medium"==e&&(thestring+="rs_active ");thestring+="><a href='JavaScript:void(0);' onclick='rs.changeSettings(\""+a+'","'+b+'","medium");return false;\'>'+rs.data.getPhrase("medium")+"</a></li>";thestring+="<li class=";"fast"==e&&(thestring+="rs_active ");thestring+="><a href='JavaScript:void(0);' onclick='rs.changeSettings(\""+a+'","'+b+'","fast");return false;\'>'+rs.data.getPhrase("fast")+"</a></li>";
thestring+="</ul></fieldset></div><div style='clear: both;'></div>";c=document.getElementById("controls");null!==c&&(c.style.display="block",c.innerHTML=thestring)},changeSettings:function(a,b,c){"IOS"==rs.data.getUserAgent()&&rs.html5.stop();rs.vars.STATE.CURRENT=rs.vars.STATE.CURRENT==rs.vars.STATE.PLAYING_NO_SELECTION?rs.vars.STATE.SETTINGS_CHANGED_PLAYING_NO_SELECTION:rs.vars.STATE.SETTINGS_CHANGED_PLAYING_USER_SELECTION;rs.setstyle(c);rs.readpage(a,b)},copyselected:function(a){rs.popup.mouseRel(a);
setTimeout("rs.getSelectedHTML()",50);return!0},getSelectedHTML:function(){rs.vars.sel.selectedString="";var a=void 0,b=void 0;window.getSelection?(b=window.getSelection(),b.isCollapsed||(b.getRangeAt?a=b.getRangeAt(0):(a=document.createRange(),a.setStart(b.anchorNode,b.anchorOffset),a.setEnd(b.focusNode,b.focusOffset)),a?(DOM=a.cloneContents(),object=document.createElement("div"),object.appendChild(DOM.cloneNode(!0)),rs.vars.sel.selectedString=object.innerHTML):rs.vars.sel.selectedString=b),rs.vars.sel.selectedRange=
a):document.selection?(b=document.selection,a=b.createRange(),rs.vars.sel.selectedString=a&&a.htmlText&&a.text&&0<a.text.length?a.htmlText:a&&a.text?a.text:""):document.getSelection&&(rs.vars.sel.selectedString=document.getSelection());window.getSelection?0<rs.vars.sel.selectedString.length&&window.getSelection().getRangeAt(0)&&0<window.getSelection().getRangeAt(0).toString().length?rs.popup.button():rs.vars.sel.selectedString="":rs.popup.button();0<rs.vars.sel.selectedString.length&&rs.vars.STATE.CURRENT==
rs.vars.STATE.READY?rs.vars.STATE.CURRENT=rs.vars.STATE.USER_SELECTION:0<rs.vars.sel.selectedString.length&&rs.vars.STATE.CURRENT==rs.vars.STATE.PLAYING_USER_SELECTION?rs.vars.STATE.CURRENT=rs.vars.STATE.USER_SELECTION_WHILE_PLAYING_USER_SELECTION:0<rs.vars.sel.selectedString.length&&rs.vars.STATE.CURRENT==rs.vars.STATE.PLAYING_NO_SELECTION&&(rs.vars.STATE.CURRENT=rs.vars.STATE.USER_SELECTION_WHILE_PLAYING_NO_SELECTION)},cleanup:function(){if(document.selection){if(rs.vars.STATE.CURRENT==rs.vars.STATE.USER_SELECTION||
rs.vars.STATE.CURRENT==rs.vars.STATE.USER_SELECTION_WHILE_PLAYING_USER_SELECTION||rs.vars.STATE.CURRENT==rs.vars.STATE.USER_SELECTION_WHILE_PLAYING_NO_SELECTION){if(0<rs.vars.sel.oldwordhl_IE.length){for(var a=0;a<rs.vars.sel.oldwordhl_IE.length;a++)rs.vars.sel.oldwordhl_IE[a].className=rs.vars.sel.oldwordhlclass_IE[a];rs.vars.sel.oldwordhlclass_IE=[];rs.vars.sel.oldwordhl_IE=[]}if(0<rs.vars.sel.oldsenthl_IE.length){for(a=0;a<rs.vars.sel.oldsenthl_IE.length;a++)rs.vars.sel.oldsenthl_IE[a].className=
rs.vars.sel.oldsenthlclass_IE[a];rs.vars.sel.oldsenthl_IE=[];rs.vars.sel.oldsenthlclass_IE=[]}}if(0<rs.vars.sel.oldwordhlrange_IE.length){for(a=0;a<rs.vars.sel.oldwordhlrange_IE.length;a++)rs.vars.sel.oldwordhlbackcol_IE[a]&&rs.vars.sel.oldwordhlforecol_IE&&(rs.vars.sel.oldwordhlrange_IE[a].execCommand("backcolor",0,rs.vars.sel.oldwordhlbackcol_IE[a]),null!==rs.vars.sel.oldwordhlforecol_IE[a]&&rs.vars.sel.oldwordhlrange_IE[a].execCommand("forecolor",0,rs.vars.sel.oldwordhlforecol_IE[a]));rs.vars.sel.oldwordhlrange_IE=
[];rs.vars.sel.oldwordhlbackcol_IE=[];rs.vars.sel.oldwordhlforecol_IE=[]}if(0<rs.vars.sel.oldsenthlrange_IE.length){for(a=0;a<rs.vars.sel.oldsenthlrange_IE.length;a++)rs.vars.sel.oldsenthlbackcol_IE[a]&&rs.vars.sel.oldsenthlforecol_IE&&(rs.vars.sel.oldsenthlrange_IE[a].execCommand("backcolor",0,rs.vars.sel.oldsenthlbackcol_IE[a]),null!==rs.vars.sel.oldsenthlforecol_IE[a]&&rs.vars.sel.oldsenthlrange_IE[a].execCommand("forecolor",0,rs.vars.sel.oldsenthlforecol_IE[a]));rs.vars.sel.oldsenthlrange_IE=
[];rs.vars.sel.oldsenthlbackcol_IE=[];rs.vars.sel.oldsenthlforecol_IE=[]}rs.vars.STATE.CURRENT!=rs.vars.STATE.SETTINGS_CHANGED_PLAYING_USER_SELECTION&&rs.vars.STATE.CURRENT!=rs.vars.STATE.PLAYING_USER_SELECTION&&(rs.vars.sel.selectedWordsRange=[])}else{if(rs.vars.STATE.CURRENT==rs.vars.STATE.USER_SELECTION||rs.vars.STATE.CURRENT==rs.vars.STATE.USER_SELECTION_WHILE_PLAYING_USER_SELECTION||rs.vars.STATE.CURRENT==rs.vars.STATE.USER_SELECTION_WHILE_PLAYING_NO_SELECTION){for(var b=document.getElementsByTagName("RS:SPAN"),
a=b.length-1;-1<a;a--)b[a].className=b[a].className.replace("sync_sent_highlighted",""),b[a].className=b[a].className.replace("sync_word_highlighted","");b=document.getElementsByTagName("RSI:SPAN");for(a=b.length-1;-1<a;a--)b[a].className=b[a].className.replace("sync_sent_highlighted",""),b[a].className=b[a].className.replace("sync_word_highlighted","")}if(rs.vars.STATE.CURRENT==rs.vars.STATE.PLAYING_USER_SELECTION||rs.vars.STATE.CURRENT==rs.vars.STATE.SETTINGS_CHANGED_PLAYING_USER_SELECTION){if(0<
rs.vars.sel.oldwordhl_FF.length){for(a=0;a<rs.vars.sel.oldwordhl_FF.length;a++)rs.vars.sel.oldwordhl_FF[a].className=rs.vars.sel.oldwordhlclass_FF[a];rs.vars.sel.oldwordhlclass_FF=[];rs.vars.sel.oldwordhl_FF=[]}if(0<rs.vars.sel.oldsenthl_FF.length){for(a=0;a<rs.vars.sel.oldsenthl_FF.length;a++)rs.vars.sel.oldsenthl_FF[a].className=rs.vars.sel.oldsenthlclass_FF[a];rs.vars.sel.oldsenthl_FF=[];rs.vars.sel.oldsenthlclass_FF=[]}}(rs.vars.STATE.CURRENT==rs.vars.STATE.CLOSE||rs.vars.STATE.CURRENT==rs.vars.STATE.PLAYING_NO_SELECTION)&&
rs.cleanUpSpans()}if(rs.vars.STATE.CURRENT==rs.vars.STATE.CLOSE||rs.vars.STATE.CURRENT==rs.vars.STATE.PLAYING_NO_SELECTION&&null!=rs.vars.restoreHTML&&null!=rs.vars.readID){a=null;for(b=0;b<rs.vars.readID.length;b++)if((a=document.getElementById(rs.vars.readID[b]))&&null!==rs.vars.restoreHTML[b])a.innerHTML=rs.vars.restoreHTML[b]}rs.vars.STATE.CURRENT==rs.vars.STATE.CLOSE&&(rs.vars.STATE.CURRENT=rs.vars.STATE.READY,rs.vars.restoreHTML=[],rs.vars.readID=[])},issuePOST:function(a,b,c){rs.vars.sel.globalcount++;
if(!document.getElementById("postiframe1")||!document.getElementById("postiframe2")||!document.getElementById("postiframe3")){a=null;if(document.selection)try{a=document.createElement('<iframe name="postiframe'+rs.vars.sel.globalcount+'">')}catch(d){a=document.createElement("iframe")}else a=document.createElement("iframe");a.name="postiframe"+rs.vars.sel.globalcount;a.setAttribute("id","postiframe"+rs.vars.sel.globalcount);a.setAttribute("style","display: none; position: absolute;");a.style.display=
"none";var e=document.getElementsByTagName("body"),f=null;0<e.length&&(f=e.item(0));if(f)f.appendChild(a);else return}var a=Math.random(),e=rs.data.getParams(),g;for(g in c)c.hasOwnProperty(g)&&(e[g]=c[g]);f=document.createElement("form");f.target="postiframe"+rs.vars.sel.globalcount;f.method="post";f.action=rs.settings.protocol+"//"+rs.settings.appserverhost+"/enterprise/iframeproxy.php?rsent="+rs.settings.rsent+"&randid="+a;for(g in e)e.hasOwnProperty(g)&&(c=document.createElement("input"),c.setAttribute("name",
g),"url"==g?c.setAttribute("value",decodeURIComponent(e[g])):c.setAttribute("value",e[g]),f.appendChild(c));c=document.createElement("input");c.setAttribute("name","output");c.setAttribute("value","audiolink");f.appendChild(c);c=document.createElement("input");rs.vars.STATE.CURRENT==rs.vars.STATE.PLAYING_NO_SELECTION&&rs.settings.usePost?c.setAttribute("name","html_base64"):c.setAttribute("name","selectedhtml_base64");c.setAttribute("value",rs.base64.encode(b));f.appendChild(c);document.body.appendChild(f);
f.submit();document.body.removeChild(f);return rs.settings.protocol+"//"+rs.settings.appserverhost+"/enterprise/iframeproxy.php?rsent="+rs.settings.rsent+"&listen=1&randid="+a},removeiFrames:function(){document.getElementById("postiframe1")&&document.body.removeChild(document.getElementById("postiframe1"));document.getElementById("postiframe2")&&document.body.removeChild(document.getElementById("postiframe2"));document.getElementById("postiframe3")&&document.body.removeChild(document.getElementById("postiframe3"))},
rshlsetContent:function(a){rs.vars.newhtml+=a},rshlsetId:function(a){rs.vars.currentReadID=a},rshlinit:function(){if(rs.vars.STATE.CURRENT==rs.vars.STATE.PLAYING_USER_SELECTION||rs.vars.STATE.CURRENT==rs.vars.STATE.USER_SELECTION_WHILE_PLAYING_USER_SELECTION)rs.vars.sel.firstrun=1,document.selection?document.selection.empty():rs.identifyElementsReplacementNode(document.body),rs.vars.newhtml="";else if("none"!=rs.vars.thesync){var a=null;null!==rs.vars.currentReadID&&(a=document.getElementById(rs.vars.currentReadID));
null!==a&&(a.innerHTML=rs.vars.newhtml,rs.vars.newhtml="")}else rs.vars.newhtml="";rs.removeiFrames()},rshlsync:function(a,b){var c=!1;0==(a&2)&&(c=0!=(a&1)?!0:!1);if(rs.vars.STATE.CURRENT==rs.vars.STATE.PLAYING_USER_SELECTION||rs.vars.STATE.CURRENT==rs.vars.STATE.USER_SELECTION_WHILE_PLAYING_USER_SELECTION)if(document.selection){var d;d=rs.vars.sel.selectedWordsRange[b];if(1==rs.vars.sel.firstrun){rs.vars.sel.firstrun=0;if(rs.vars.sel.oldsenthlrange_IE&&0<rs.vars.sel.oldsenthlrange_IE.length){for(var e=
0;e<rs.vars.sel.oldsenthlrange_IE.length;e++)rs.vars.sel.oldsenthlbackcol_IE[e]&&rs.vars.sel.oldsenthlforecol_IE&&(rs.vars.sel.oldsenthlrange_IE[e].execCommand("backcolor",0,rs.vars.sel.oldsenthlbackcol_IE[e]),null!==rs.vars.sel.oldsenthlforecol_IE[e]&&rs.vars.sel.oldsenthlrange_IE[e].execCommand("forecolor",0,rs.vars.sel.oldsenthlforecol_IE[e]));rs.vars.sel.oldsenthlrange_IE=[];rs.vars.sel.oldsenthlbackcol_IE=[];rs.vars.sel.oldsenthlforecol_IE=[]}if(rs.vars.sel.selectedWordsRange&&0<rs.vars.sel.selectedWordsRange.length&&
"wordsent"==rs.vars.thesync)for(e=0;e<rs.vars.sel.selectedWordsRange.length;e++)rs.vars.sel.selectedWordsRange[e]&&(rs.vars.sel.oldsenthlrange_IE.push(rs.vars.sel.selectedWordsRange[e]),rs.vars.sel.oldsenthlbackcol_IE.push(rs.vars.sel.selectedWordsRange[e].queryCommandValue("backcolor")),rs.vars.sel.oldsenthlforecol_IE.push(rs.vars.sel.selectedWordsRange[e].queryCommandValue("forecolor")),""!=rs.vars.sel.selectedWordsRange[e].text&&(rs.vars.sel.selectedWordsRange[e].execCommand("backcolor",0,rs.settings.sentColor),
rs.vars.sel.selectedWordsRange[e].execCommand("forecolor",0,rs.settings.textColor)))}if("wordsent"==rs.vars.thesync||"sent"==rs.vars.thesync||"word"==rs.vars.thesync||""==rs.vars.thesync){if(!c&&0<rs.vars.sel.oldwordhlrange_IE.length){for(e=0;e<rs.vars.sel.oldwordhlrange_IE.length;e++)"word"==rs.vars.thesync||"sent"==rs.vars.thesync?rs.vars.sel.oldwordhlrange_IE[e].execCommand("backcolor",0,rs.vars.sel.oldwordhlbackcol_IE[e]):rs.vars.sel.oldwordhlrange_IE[e].execCommand("backcolor",0,rs.settings.sentColor),
rs.vars.sel.oldwordhlrange_IE[e].execCommand("forecolor",0,rs.vars.sel.oldwordhlforecol_IE[e]);rs.vars.sel.oldwordhlrange_IE=[];rs.vars.sel.oldwordhlbackcol_IE=[];rs.vars.sel.oldwordhlforecol_IE=[]}rs.vars.sel.oldwordhlbackcol_IE.push(d.queryCommandValue("backcolor"));rs.vars.sel.oldwordhlforecol_IE.push(d.queryCommandValue("forecolor"));rs.vars.sel.oldwordhlrange_IE.push(d);"sent"==rs.vars.thesync?d.execCommand("backcolor",0,rs.settings.sentColor):d.execCommand("backcolor",0,rs.settings.wordColor);
d.execCommand("forecolor",0,rs.settings.textColor)}}else{d=rs.vars.sel.selectedWordsRange["sync"+b];if(d.className.replace("word","")!=d.className){if(rs.vars.sel.oldwordhl_FF&&0<rs.vars.sel.oldwordhl_FF.length&&rs.vars.sel.oldwordhlclass_FF&&0<rs.vars.sel.oldwordhlclass_FF.length&&!c){for(e=0;e<rs.vars.sel.oldwordhl_FF.length;e++)rs.vars.sel.oldwordhl_FF[e].className=rs.vars.sel.oldwordhlclass_FF[e];rs.vars.sel.oldwordhlclass_FF=[];rs.vars.sel.oldwordhl_FF=[]}if("wordsent"==rs.vars.thesync||"sent"==
rs.vars.thesync||"word"==rs.vars.thesync||""==rs.vars.thesync)rs.vars.sel.oldwordhlclass_FF.push(d.className),rs.vars.sel.oldwordhl_FF.push(d),d.className="sent"==rs.vars.thesync?"sync_sent_highlighted":"sync_word_highlighted"}if(1==rs.vars.sel.firstrun){rs.vars.sel.firstrun=0;if(0<rs.vars.sel.oldsenthl_FF.length){for(e=0;e<rs.vars.sel.oldsenthl_FF.length;e++)rs.vars.sel.oldsenthl_FF[e].className=rs.vars.sel.oldsenthlclass_FF[e];rs.vars.sel.oldsenthl_FF=[];rs.vars.sel.oldsenthlclass_FF=[]}if("none"!=
rs.vars.thesync&&"word"!=rs.vars.thesync&&"sent"!=rs.vars.thesync){c=rs.returnClassArraySubstring("ffsent"+rs.vars.sel.seltexttimes+" ");for(e=0;e<c.length;e++)rs.vars.sel.oldsenthl_FF[e]=c[e],rs.vars.sel.oldsenthlclass_FF[e]=rs.vars.sel.oldsenthl_FF[e].className,c[e].className="sync_sent_highlighted"}}}else if(document.selection)if((d=document.getElementById("sync"+b))&&d.className.replace("word","")!=d.className){if(!c&&0<rs.vars.sel.oldwordhl_IE.length){for(e=0;e<rs.vars.sel.oldwordhl_IE.length;e++)rs.vars.sel.oldwordhl_IE[e].className=
rs.vars.sel.oldwordhlclass_IE[e];rs.vars.sel.oldwordhl_IE=[];rs.vars.sel.oldwordhlclass_IE=[]}rs.vars.sel.oldwordhlclass_IE.push(d.className);rs.vars.sel.oldwordhl_IE.push(d);d.className="sync_word_highlighted"}else{if(d&&d.className.replace("sent","")!=d.className){if(!c&&0<rs.vars.sel.oldsenthl_IE.length){for(e=0;e<rs.vars.sel.oldsenthl_IE.length;e++)rs.vars.sel.oldsenthl_IE[e].className=rs.vars.sel.oldsenthlclass_IE[e];rs.vars.sel.oldsenthl_IE=[];rs.vars.sel.oldsenthlclass_IE=[]}rs.vars.sel.oldsenthlclass_IE.push(d.className);
rs.vars.sel.oldsenthl_IE.push(d);d.className="sync_sent_highlighted"}}else if((d=document.getElementById("sync"+b))&&d.className.replace("word","")!=d.className){if(!c&&0<rs.vars.sel.oldwordhl_FF.length){for(e=0;e<rs.vars.sel.oldwordhl_FF.length;e++)rs.vars.sel.oldwordhl_FF[e].className=rs.vars.sel.oldwordhlclass_FF[e];rs.vars.sel.oldwordhl_FF=[];rs.vars.sel.oldwordhlclass_FF=[]}rs.vars.sel.oldwordhlclass_FF.push(d.className);rs.vars.sel.oldwordhl_FF.push(d);d.className="sync_word_highlighted"}else if(d&&
d.className.replace("sent","")!=d.className){if(!c&&0<rs.vars.sel.oldsenthl_FF.length){for(e=0;e<rs.vars.sel.oldsenthl_FF.length;e++)rs.vars.sel.oldsenthl_FF[e].className=rs.vars.sel.oldsenthlclass_FF[e];rs.vars.sel.oldsenthl_FF=[];rs.vars.sel.oldsenthlclass_FF=[]}rs.vars.sel.oldsenthlclass_FF.push(d.className);rs.vars.sel.oldsenthl_FF.push(d);d.className="sync_sent_highlighted"}},selectRange:function(){rs.vars.sel.seltexttimes++;if(document.selection)return rs.vars.sel.selectedRange=document.selection.createRange().duplicate(),
rs.selectRangeIE(rs.vars.sel.selectedRange,-1);var a="",a=rs.vars.sel.selectedRange;rs.vars.sel.startNode=a.startContainer;rs.vars.sel.endNode=a.endContainer;rs.vars.sel.startOffset=rs.modifyOffsetStartOfWord(rs.vars.sel.startNode,a.startOffset);rs.vars.sel.endOffset=rs.modifyOffsetEndOfWord(rs.vars.sel.endNode,a.endOffset);rs.vars.sel.bmindex++;rs.vars.sel.sentbmindex=rs.vars.sel.bmindex;rs.vars.sel.bmindex++;rs.vars.sel.startofsentence=1;a=rs.rangeMarkupGecko(a.commonAncestorContainer);window.getSelection().removeAllRanges();
return a},selectRangeIE:function(a){var b=a.duplicate();a.moveStart("word",-1);a.moveStart("word",1);b.isEqual(a)||a.moveStart("word",-1);b=a.duplicate();a.moveEnd("word",1);a.moveEnd("word",-1);b.isEqual(a)||a.moveEnd("word",1);var b=a.duplicate(),c=0,d="",e=1,f=a.parentElement(),g=0;b.collapse();var h=b.duplicate();h.collapse(!1);for(var l=0;a.inRange(b)&&0!=a.compareEndPoints("EndToEnd",b);){l++;c++;if(1E4<c)break;b.collapse(!1);b.expand("word",1);var p="",s="",n=b.duplicate();n.collapse(!1);h.collapse(!1);
if(0==h.compareEndPoints("StartToStart",n)&&0==h.compareEndPoints("EndToEnd",n)&&n.htmlText==h.htmlText){g++;if(2>g)b.move("character",1);else if(4>g)b.move("character",2);else if(6>g)b.move("word",1);else if(8>g)b.move("word",2);else if(10>g)b.move("sentence",1);else if(12>g)b.move("sentence",2);else break;b.collapse(!1)}else{g=0;if(-1==l)return b;rs.vars.sel.selectedWordsRange[l]=b.duplicate();h=b.text;n=b.htmlText;b.collapse(!1);var q;e?(lastPos=b.duplicate(),q=rs.iterateParentTree(lastPos.parentElement(),
document.body,f,0)):q=rs.iterateParentTree(b.parentElement(),lastPos.parentElement(),f,0);for(var r=rs.iterateParentTree(lastPos.parentElement(),b.parentElement(),f,0),k=b.parentElement(),m=0;m<q&&20>m;m++)k.className.match("sync_")||(p=k.outerHTML.match("<[^>]*>")[0]+p),k=k.parentElement;k=lastPos.parentElement();for(m=0;m<r&&20>m;m++)k.className.match("sync_")||(s+="</"+k.tagName+">"),k=k.parentElement;if(0!=q||0!=r)lastPos=b.duplicate();e?(d+=p,e=0):d+=s+p;""!=n.replace("sync_sent_highlighted",
"")&&(d+="<rs:span class='sync_user' id='sync"+l+"'>"+h+"</rs:span>");h=b.duplicate()}}d+="<\!-- f --\>";r=rs.iterateParentTree(lastPos.parentElement(),document.body,f,0);k=lastPos.parentElement();for(m=0;m<r;m++)k.className.match("sync_")||(d+="</"+k.tagName+">"),k=k.parentElement;b.collapse();return d},iterateParentTree:function(a,b,c,d){for(var e=b;null!==e;){if(a==c||a==e)return d;e=e.parentElement}d++;return rs.iterateParentTree(a.parentElement,b,c,d)},rangeMarkupGecko:function(a){rs.vars.sel.firstrun=
1;var b="",c=rs.vars.sel.inc;if(3==a.nodeType)b+=rs.markup(a);else{var d,e="";if(a.hasChildNodes())for(d=0;d<a.childNodes.length;d++){var f=a.childNodes.item(d);f==rs.vars.sel.startNode&&(rs.vars.sel.inc=1);a==rs.vars.sel.startNode&&d==rs.vars.sel.startOffset&&(rs.vars.sel.inc=1);8!=f.nodeType&&(e+=rs.rangeMarkupGecko(f));if(a==rs.vars.sel.endNode&&d==rs.vars.sel.endOffset){rs.vars.sel.inc=0;break}if(f==rs.vars.sel.endNode){rs.vars.sel.inc=0;break}}(c||rs.vars.sel.inc)&&(!a.className||a.className.replace("sync")==
a.className&&a.id.replace("sync")==a.id)?(c=document.createElement("div"),c.appendChild(a.cloneNode(!0)),tempdivtag=c.innerHTML.match("<[^>]*>"),null!==tempdivtag&&0<tempdivtag.length?(b+=tempdivtag[0],b=b+e+("</"+a.nodeName+">")):b+=e):b+=e;if(a.hasChildNodes())for(d=0;d<a.childNodes.length;d++){if(a==rs.vars.sel.endNode&&d==rs.vars.sel.endOffset){rs.vars.sel.inc=0;break}if(f==rs.vars.sel.endNode){rs.vars.sel.inc=0;break}}}return b.replace(/rsi:span/g,"rs:span")},markup:function(a){var b=!0,c="",
d,e="",f="",g=a.nodeValue;a==rs.vars.sel.startNode&&-1!=rs.vars.sel.startOffset&&a==rs.vars.sel.endNode&&-1!=rs.vars.sel.endOffset?(e=a.nodeValue.substring(0,rs.vars.sel.startOffset),g=a.nodeValue.substring(rs.vars.sel.startOffset,rs.vars.sel.endOffset),f=a.nodeValue.substring(rs.vars.sel.endOffset),rs.vars.sel.inc=1):a==rs.vars.sel.startNode&&-1!=rs.vars.sel.startOffset?(e=a.nodeValue.substring(0,rs.vars.sel.startOffset),g=a.nodeValue.substring(rs.vars.sel.startOffset),rs.vars.sel.inc=1):a==rs.vars.sel.endNode&&
-1!=rs.vars.sel.endOffset&&(g=a.nodeValue.substring(0,rs.vars.sel.endOffset),f=a.nodeValue.substring(rs.vars.sel.endOffset),rs.vars.sel.inc=1);if(!rs.vars.sel.inc)return"";for(d=0;d<rs.vars.sel.exludednodes.length;d++)if(a.parentNode&&a.parentNode.nodeName.toLowerCase()==rs.vars.sel.exludednodes[d]){b=!1;c=rs.htmlencode(g);break}b&&(c=rs.markupSentences(rs.htmlencode(g),null));a==rs.vars.sel.endNode&&-1!=rs.vars.sel.endOffset&&(rs.vars.sel.inc=0);b&&(null!==a.parentNode&&""!=g)&&(b=rs.createreplacementnode(e+
c+f,getComputedStyle(a.parentNode,null)),a.parentNode.insertBefore(b,a),a.parentNode.removeChild(a));return c},markupSentences:function(a){a=rs.splitString(a,[", ",". ","! ","? ",decodeURIComponent("%e3%80%81"),decodeURIComponent("%e3%80%82")]);if(!a)return"";for(var b="",c=0;c<a.length;c++)b+="<rsi:span class=' ffsent"+rs.vars.sel.seltexttimes+" cj"+rs.vars.sel.seltexttimes+"' ",b+="id='sync"+rs.vars.sel.sentbmindex+"'",rs.vars.sel.startofsentence=0,b+=">",b+=rs.markupWords(a[c]),b+="</rsi:span>";
return b},markupWords:function(a){a=rs.splitString(a," ");if(!a)return"";for(var b="",c=0;c<a.length;c++)b+="<rsi:span class='sync_user word ck"+rs.vars.sel.seltexttimes+"'",b+=" id='sync"+rs.vars.sel.bmindex++ +"'",b+=">",b+=a[c],b+="</rsi:span>";return b},trim:function(a){return a.replace(/^\s+|\s+$/g,"")},htmlencode:function(a){var b=document.createElement("div"),a=document.createTextNode(a);b.appendChild(a);return b.innerHTML},identifyElementsReplacementNode:function(a){a.tagName&&("RSI:SPAN"==
a.tagName&&a.id)&&(rs.vars.sel.selectedWordsRange[a.id]=a);if(a.hasChildNodes())for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes.item(b);rs.identifyElementsReplacementNode(c)}},createreplacementnode:function(a){var b=document.createElement("rsi:span");b.innerHTML=a;b.setAttribute("class","synctemp cl"+rs.vars.sel.seltexttimes);return b},modifyOffsetStartOfWord:function(a,b){for(var c=[" ",", ",". ","! ","? ",decodeURIComponent("%e3%80%81"),decodeURIComponent("%e3%80%82")];a.nodeValue&&0!=
b;){for(var d=0;d<c.length;d++)if(breakstr=c[d],0==a.nodeValue.substring(b-1).indexOf(breakstr))return b;b--}return b},modifyOffsetEndOfWord:function(a,b){for(var c=[" ",", ",". ","! ","? ",decodeURIComponent("%e3%80%81"),decodeURIComponent("%e3%80%82")];a.nodeValue&&b!=a.nodeValue.length;){for(var d=0;d<c.length;d++)if(breakstr=c[d],0==a.nodeValue.substring(b-1).indexOf(breakstr))return b;b++}return b},returnClassArraySubstring:function(a){var b=document.getElementsByTagName("*"),c=0,d=[];for(i=
0;i<b.length;i++)b[i].className.replace(a,"")!=b[i].className&&(d[c]=b[i],c++);return d},cleanUpSpans:function(){var a=document.getElementsByTagName("RSI:SPAN"),b;for(i=a.length-1;-1<i;i--){b=document.createDocumentFragment();for(j=0;j<a[i].childNodes.length;j++)b.appendChild(a[i].childNodes[j].cloneNode(!0));a[i].parentNode.replaceChild(b,a[i])}},splitString:function(a,b){for(var c=[""],d=0,e=0;e<a.length;e++){for(var f=0;f<b.length;f++){for(var g=b[f],h=!0,l=0;l<g.length;l++)if(0>a.length-(e+l)||
g[g.length-l-1]!=a[e-l-1]){h=!1;break}h&&(d++,c[d]="")}c[d]+=a[e]}return c},popup:{buttonExists:null,firstRun:!0,mouse_y_startpos:null,mouse_x_pos:null,mouse_y_pos:null,player_x_pos:null,player_y_pos:null,time:null,viewportwidth:null,viewportheight:null,button:function(){if(rs.popup.mouse_x_pos&&rs.popup.mouse_y_pos&&0<rs.vars.sel.selectedString.length){if(!document.getElementById("rs_selimg"))if(rs.popup.buttonExists){var a=document.createElement("img");a.setAttribute("src",rs.data.getImage("popupSrc"));
a.style.border="none";a.setAttribute("alt",rs.data.getPhrase("listentoselectedtext"));a.setAttribute("title",rs.data.getPhrase("listentoselectedtext"));var b=document.createElement("a");b.setAttribute("id","rs_selimg");b.setAttribute("href",rs.settings.rscall);b.setAttribute("onclick","clearTimeout(rs.popup.time);rs.popup.setVisibility();"+rs.settings.onclick);b.setAttribute("onmouseover","clearTimeout(rs.popup.time);");b.setAttribute("onmouseout","rs.popup.hideIcon();");b.onclick=new Function("clearTimeout(rs.popup.time);rs.popup.setVisibility();"+
rs.settings.onclick);b.onmouseover=new Function("clearTimeout(rs.popup.time);");b.onmouseout=new Function("rs.popup.hideIcon();");b.appendChild(a);a=document.createDocumentFragment();a.appendChild(b);document.body.appendChild(a)}else rs.popup.firstRun&&(rs.init(),rs.popup.firstRun=!1,rs.popup.button());rs.popup.buttonExists&&(b=document.getElementById("rs_selimg"),b.style.top=rs.popup.mouse_y_pos+"px",b.style.left=rs.popup.mouse_x_pos+"px",rs.popup.player_y_pos=rs.popup.mouse_y_pos+"px",rs.popup.player_x_pos=
rs.popup.mouse_x_pos+"px",a=rs.loadSettings("ReadSpeakerHLicon"),""==a&&(a=rs.settings.usePopupButton?rs.settings.defaultPopup:"iconoff"),b.style.display="iconoff"==a?"none":"inline",rs.popup.hideIcon())}},player:function(a){var b={audioformat:"flv",sync:"user"};b.speed=rs.vars.thespeed;b.syncalignuser=rs.vars.thesync;var c=encodeURIComponent(rs.issuePOST(a,rs.vars.sel.selhtml,b)),b={};b.speed=rs.vars.thespeed;var b=rs.issuePOST(a,rs.vars.sel.selhtml,b),d=document.getElementById(rs.vars.currentPlayerID);
if(!d){d=document.createElement("div");d.setAttribute("id","rs_popup_player");var e=document.createDocumentFragment();e.appendChild(d);document.body.appendChild(e);d=document.getElementById(rs.vars.currentPlayerID)}d.style.top=rs.popup.player_y_pos;d.style.left=rs.popup.player_x_pos;d="<div style='height: "+rs.settings.flash.popupHeight+"px;'><span style='position: absolute; top: 0px; left: 0px;'><object id='rsPlayer' "+(document.selection?"classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'":"type='application/x-shockwave-flash' data='"+
rs.data.getImage("flashSrc")+"?flv="+c+rs.settings.flash.params+"&rplayer=mini&text_play="+rs.data.getPhrase("play")+"&text_pause="+rs.data.getPhrase("pause")+"&text_stop="+rs.data.getPhrase("stop")+"&text_vol="+rs.data.getPhrase("volume")+"'")+" style='height:"+rs.settings.flash.popupHeight+"px; width:"+rs.settings.flash.popupWidth+"px;'>";d+="<param name='movie' value='"+rs.data.getImage("flashSrc")+"?flv="+c+rs.settings.flash.params+"&rplayer=mini&text_play="+rs.data.getPhrase("play")+"&text_pause="+
rs.data.getPhrase("pause")+"&text_stop="+rs.data.getPhrase("stop")+"&text_vol="+rs.data.getPhrase("volume")+"'>";d=d+"<param name='quality' value='high'><param name='autostart' value='true'>"+("<param name='allowScriptAccess' value='"+rs.settings.flash.allowScriptAccess+"'><param name='bgcolor' value='#FFFFFF'>");d+="<param name='loop' value='false'><a id='rsSaveBtn' href='"+b+"' target='rs'>"+rs.data.getPhrase("nosound")+"</a></object></span>";d+="<span style='position: absolute; top: 4px; right: 4px;'><a href='JavaScript:void(0);' onclick='rs.closepage(\""+
rs.vars.currentPlayerID+"\");return false'><img style='border-style: none !important; margin: 0px !important;' src='"+rs.data.getImage("closeSrc")+"' title='"+rs.data.getPhrase("closeplayer")+"' alt='"+rs.data.getPhrase("closeplayer")+"'></a></span></div>";d+="<span id='rs_popup_link' style='position: absolute; top: 4px; right: 21px;'><a href='JavaScript:void(0);' onclick='rs.showcontrols(\""+a+'","'+rs.vars.currentPlayerID+"\");return false'><img style='border-style: none !important;' src='"+rs.data.getImage("settingsSrc")+
"' alt='"+rs.data.getPhrase("settings")+"' title='"+rs.data.getPhrase("settings")+"'></a></span>";d+="<div id='controls'></div>";if(a=document.getElementById(rs.vars.currentPlayerID))a.innerHTML=d,a.style.display="block"},hideIcon:function(){rs.popup.time&&clearTimeout(rs.popup.time);rs.popup.time=setTimeout("rs.popup.setVisibility()",2500)},setVisibility:function(){document.getElementById("rs_selimg")&&(document.getElementById("rs_selimg").style.display="none")},mousePress:function(a){a||(a=window.event);
a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation();if(a.pageX||a.pageY)rs.popup.mouse_y_startpos=a.pageY;else if(a.clientX||a.clientY)rs.popup.mouse_y_startpos=a.clientY+document.body.scrollTop+document.documentElement.scrollTop;return!0},mouseRel:function(a){a||(a=window.event);a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation();var b=null,c=null;rs.popup.getViewportSize();if(a.pageX||a.pageY)b=a.pageY,c=a.pageX;else if(a.clientX||a.clientY)b=a.clientY+document.body.scrollTop+document.documentElement.scrollTop,
c=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;rs.popup.mouse_y_pos=b>rs.popup.mouse_y_startpos?b+20>rs.popup.viewportheight-30?b-40:b+20:10>b-40?b+20:b-40;rs.popup.mouse_x_pos=5>c?c+30:c>rs.popup.viewportwidth-80?c-80:c+15;return!0},getViewportSize:function(){"undefined"!=typeof window.innerWidth?(rs.popup.viewportwidth=window.innerWidth+document.body.scrollLeft+document.documentElement.scrollLeft,rs.popup.viewportheight=window.innerHeight+document.body.scrollTop+document.documentElement.scrollTop):
"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!=document.documentElement.clientWidth?(rs.popup.viewportwidth=document.documentElement.clientWidth+document.body.scrollLeft+document.documentElement.scrollLeft,rs.popup.viewportheight=document.documentElement.clientHeight+document.body.scrollTop+document.documentElement.scrollTop):(rs.popup.viewportwidth=document.getElementsByTagName("body")[0].clientWidth+document.body.scrollLeft+document.documentElement.scrollLeft,
rs.popup.viewportheight=document.getElementsByTagName("body")[0].clientHeight+document.body.scrollTop+document.documentElement.scrollTop)}},base64:{encode:function(a){newdata=encodeURIComponent(a);for(var b=0,c=0,a=[];b<newdata.length;b++)37!=newdata.charCodeAt(b)?a[c]=newdata.charCodeAt(b):(a[c]=parseInt("0x"+newdata.charAt(b+1)+""+newdata.charAt(b+2)),b+=2),c++;b=a.length;parseInt((b+2)/3);for(var c=new String,d=parseInt(b/3),e,f=b-3*d,b=0;b<3*d;b+=3)e=rs.base64.chars(a[b]>>2),c+=e,e=rs.base64.chars((a[b]&
3)<<4|a[b+1]>>4),c+=e,e=rs.base64.chars((a[b+1]&15)<<2|a[b+2]>>6),c+=e,e=rs.base64.chars(a[b+2]&63),c+=e;1==f&&(c+=rs.base64.chars(a[b]>>2),c+=rs.base64.chars((a[b]&3)<<4),c+="==");2==f&&(c+=rs.base64.chars(a[b]>>2),c+=rs.base64.chars((a[b]&3)<<4|a[b+1]>>4),c+=rs.base64.chars((a[b+1]&15)<<2),c+="=");return c},decode:function(a){for(var b="",c="",d=0,e=0,f="",g=a.length;d<g;)if(-1!=rs.base64.value(a[d])){f=a.substring(d,d+4);for(i=e=0;4>i;i++)"="==f[i]&&e++;for(i=0;i<3-e;i++){0==i?c=rs.base64.value(f[0])<<
2|(rs.base64.value(f[1])&48)>>4:1==i?c=(rs.base64.value(f[1])&15)<<4|(rs.base64.value(f[2])&60)>>2:2==i&&(c=(rs.base64.value(f[2])&3)<<6|rs.base64.value(f[3]));var h=c.toString(16);1==h.length&&(h="0"+h);b+="%"+h}d+=4}else d++;return decodeURIComponent(b)},value:function(a){a=a.charCodeAt(0);return 65<=a&&90>=a?a-65:97<=a&&122>=a?a-97+26:48<=a&&57>=a?a-48+52:43==a?62:47==a?63:-1},chars:function(a){return 26>a?String.fromCharCode(a+65):52>a?String.fromCharCode(a+97-26):62>a?String.fromCharCode(a+48-
52):62==a?"+":63==a?"/":String.fromCharCode(0)}},html5:{STATE_BEGIN:0,STATE_USER_START_NOT_READY:1,STATE_USER_START_PLAYING:2,state:0,inUse:!1,audioelement:null,lastcurrenttime:-1,currentsyncindex:0,lastevent:null,lastlastevent:null,lastlastlastevent:null,synclist:[],synclistindex:0,url:null,iframeurl:null,player:function(a){var b=Math.random(),c={};rs.vars.STATE.CURRENT!=rs.vars.STATE.PLAYING_NO_SELECTION?(c.audioformat="mp3",c.sync="user",c.speed=rs.vars.thespeed,c.syncalignuser=rs.vars.thesync,
c.requestgrouptype="html5iframe",c.requestgroup=b,rs.html5.url=rs.issuePOST(a,rs.vars.sel.selhtml,c),c.audioformat="html5iframe",rs.html5.iframeurl=rs.issuePOST(a,rs.vars.sel.selhtml,c),c={},c.speed=rs.vars.thespeed,c=rs.issuePOST(a,rs.vars.sel.selhtml,c)):rs.settings.usePost?(c.audioformat="mp3",c.sync=rs.vars.thesync,c.speed=rs.vars.thespeed,c.requestgrouptype="html5iframe",c.requestgroup=b,rs.html5.url=rs.issuePOST(a,"<div id='"+rs.vars.currentReadID+"'>"+rs.vars.currentRestoreHTML+"</div>",c),
c.audioformat="html5iframe",rs.html5.iframeurl=rs.issuePOST(a,"<div id='"+rs.vars.currentReadID+"'>"+rs.vars.currentRestoreHTML+"</div>",c),c={},c.speed=rs.vars.thespeed,c=rs.issuePOST(a,"<div id='"+rs.vars.currentReadID+"'>"+rs.vars.currentRestoreHTML+"</div>",c)):(c.audioformat="mp3",c.sync=rs.vars.thesync,c.speed=rs.vars.thespeed,c.requestgrouptype="html5iframe",c.requestgroup=b,rs.html5.url=rs.data.getRSCall(c),c.audioformat="html5iframe",rs.html5.iframeurl=rs.data.getRSCall(c),c={audioformat:"mp3"},
c.speed=rs.vars.thespeed,c=rs.data.getRSCall(c));b="<div id='rs_playerarea'><div style='margin-bottom: 2px; width: 100%; height: 20px;'>"+("<div style='position: absolute; top: 4px; left: 4px;'><a id='rs_playbtn' href='JavaScript:void(0);'><img id='rs_playimg' style='border-style: none !important; margin: 0px !important; padding:0px !important;' src='"+rs.data.getImage("playInactiveSrc")+"' title='"+rs.data.getPhrase("play")+"' alt='"+rs.data.getPhrase("play")+"'></a></div>");b+="<div style='position: absolute; top: 4px; left: 21px;'><a id='rs_pausebtn' href='JavaScript:void(0);'><img id='rs_pauseimg' style='border-style: none !important; margin: 0px !important; padding:0px !important;' src='"+
rs.data.getImage("pauseSrc")+"' title='"+rs.data.getPhrase("pause")+"' alt='"+rs.data.getPhrase("pause")+"'></a></div>";b+="<div style='position: absolute; top: 4px; left: 38px;'><a id='rs_stopbtn' href='JavaScript:void(0);'><img id='rs_stopimg' style='border-style: none !important; margin: 0px !important; padding:0px !important;' src='"+rs.data.getImage("stopSrc")+"' title='"+rs.data.getPhrase("stop")+"' alt='"+rs.data.getPhrase("stop")+"'></a></div>";b=b+"<div id='timeline'><div id='duration'></div><span id='durationtxt'></span></div>"+
("<div style='position: absolute; top: 2px; left: 231px;'><a href='http://www.readspeaker.com/?ref="+encodeURIComponent(document.location.href)+"'><img style='border-style: none !important; margin: 0px !important; padding:0px !important;' src='"+rs.data.getImage("iconSrc")+"' title='Go to the ReadSpeaker website' alt='Go to the ReadSpeaker website' /></a></div>");b+="<span style='position: absolute; top: 4px; right: 4px;'><a style='border-style: none;' href='JavaScript:void(0);' onclick='rs.html5.stop();rs.closepage(\""+
rs.vars.currentPlayerID+"\");return false'><img style='border-style: none !important; margin: 0px !important;' id='closebr' src='"+rs.data.getImage("closeSrc")+"' alt='"+rs.data.getPhrase("closeplayer")+"' title='"+rs.data.getPhrase("closeplayer")+"'></a></span></div>";b+="<div id='bottomlinks'><a href='JavaScript:void(0);' class='rs_settings' onclick='rs.showcontrols(\""+a+'","'+rs.vars.currentPlayerID+"\");return false'>"+rs.data.getPhrase("settings")+"</a> | <a id='rsSaveBtn' href='"+c+"' target='rs'>"+
rs.data.getPhrase("nosound")+"</a> | "+rs.data.getPhrase("speechenabled")+"</div>";b+="<div id='controls'></div>";b+="</div>";if(a=document.getElementById(rs.vars.currentPlayerID))a.innerHTML=b,a.style.display="block";rs.html5.start()},start:function(){rs.html5.stop();var a=null;rs.html5.audioelement=new Audio(rs.html5.url);rs.html5.audioelement.setAttribute("controls","controls");rs.html5.audioelement.loop=!1;rs.html5.audioelement.play();rs.html5.audioelement.addEventListener("ended",rs.html5.controls.stop,
!1);rs.html5.audioelement.addEventListener("timeupdate",rs.html5.controls.timer,!1);document.getElementById("rs_playbtn").addEventListener("click",rs.html5.controls.play,!1);document.getElementById("rs_pausebtn").addEventListener("click",rs.html5.controls.pause,!1);document.getElementById("rs_stopbtn").addEventListener("click",rs.html5.controls.stop,!1);"none"!=rs.vars.thesync?(document.getElementById("synciframe")?a=document.getElementById("synciframe"):(a=document.createElement("iframe"),a.setAttribute("id",
"synciframe")),a.src=rs.html5.iframeurl,a.type="text/javascript",a.height=0,a.width=0,a.style.display="none",document.body.appendChild(a),rs.html5.refresh()):rs.html5.state=rs.html5.STATE_USER_START_PLAYING},controls:{play:function(){rs.html5.audioelement?rs.html5.audioelement.play():rs.html5.start(rs.html5.url);document.getElementById("rs_playimg")&&document.getElementById("rs_playimg").setAttribute("src",rs.data.getImage("playInactiveSrc"));document.getElementById("rs_pauseimg")&&document.getElementById("rs_pauseimg").setAttribute("src",
rs.data.getImage("pauseSrc"));document.getElementById("rs_stopimg")&&document.getElementById("rs_stopimg").setAttribute("src",rs.data.getImage("stopSrc"))},pause:function(){setTimeout("rs.html5.audioelement.pause()",200);document.getElementById("rs_pauseimg")&&document.getElementById("rs_pauseimg").setAttribute("src",rs.data.getImage("pauseInactiveSrc"));document.getElementById("rs_playimg")&&document.getElementById("rs_playimg").setAttribute("src",rs.data.getImage("playSrc"))},stop:function(){rs.html5.audioelement&&
rs.html5.audioelement.removeEventListener("timeupdate",rs.html5.controls.timer,!1);rs.html5.stop();rs.rshlexit();document.getElementById("rs_stopimg")&&document.getElementById("rs_stopimg").setAttribute("src",rs.data.getImage("stopInactiveSrc"));document.getElementById("rs_playimg")&&document.getElementById("rs_playimg").setAttribute("src",rs.data.getImage("playSrc"));document.getElementById("rs_pauseimg")&&document.getElementById("rs_pauseimg").setAttribute("src",rs.data.getImage("pauseInactiveSrc"));
document.getElementById("duration").style.width="0%";document.getElementById("durationtxt").innerHTML="00:00 | 00:00"},timer:function(){if(rs.html5.audioelement){var a=document.getElementById("duration"),b=document.getElementById("durationtxt"),c=rs.html5.audioelement.duration;a.style.width=100*(rs.html5.audioelement.currentTime/c)+"%";if(c)a=parseInt(c%60)+"",d=parseInt(c/60%60)+"",e=parseInt(c/60/60%60)+"";else var d=a="00",e="";var f=parseInt(rs.html5.audioelement.currentTime%60)+"",g=parseInt(rs.html5.audioelement.currentTime/
60%60)+"",h=parseInt(rs.html5.audioelement.currentTime/60/60%60)+"";0!=e?(2>e.length&&(e=0+e+":"),2>h.length&&(h=0+h+":")):h=e="";2>d.length&&(d=0+d);2>a.length&&(a=0+a);2>g.length&&(g=0+g);2>f.length&&(f=0+f);b.innerHTML=c?h+g+":"+f+" | "+e+d+":"+a:"00:00 | 00:00"}}},stop:function(){if(rs.html5.state!=rs.html5.STATE_BEGIN){rs.html5.audioelement&&rs.html5.audioelement.pause();rs.html5.audioelement=null;var a=document.getElementById("synciframe");a&&(a.src="about:blank")}rs.html5.state=rs.html5.STATE_BEGIN;
rs.html5.lastcurrenttime=-1;rs.html5.currentsyncindex=0;rs.html5.synclistindex=0;rs.html5.synclist=[]},receiveMessage:function(a){a.origin.match(/readspeaker.?.com/gi)&&(null!=rs.html5.lastevent&&"rshlsetContent"==a.data?rshlsetContent(rs.base64.decode(rs.html5.lastevent.data)):null!=rs.html5.lastevent&&"rshlsetId"==a.data?rshlsetId(rs.html5.lastevent.data):"rshlinit"==a.data?rshlinit():null!=rs.html5.lastlastlastevent&&(null!=rs.html5.lastlastevent&&null!=rs.html5.lastevent&&"rshlsync"==a.data)&&
(rs.html5.synclist[rs.html5.synclistindex]=[rs.html5.lastlastlastevent.data,rs.html5.lastlastevent.data,rs.html5.lastevent.data],rs.html5.synclistindex++),rs.html5.lastlastlastevent=rs.html5.lastlastevent,rs.html5.lastlastevent=rs.html5.lastevent,rs.html5.lastevent=a)},refresh:function(){if(rs.html5.audioelement)if(0<rs.html5.audioelement.currentTime&&rs.html5.lastcurrenttime>rs.html5.audioelement.currentTime)rs.html5.controls.stop();else if(rs.html5.lastcurrenttime=rs.html5.audioelement.currentTime,
rs.html5.state==rs.html5.STATE_BEGIN)rs.html5.audioelement.pause(),rs.html5.state=rs.html5.STATE_USER_START_NOT_READY,setTimeout("rs.html5.refresh()",0);else if(rs.html5.state==rs.html5.STATE_USER_START_NOT_READY)if(rs.html5.synclist[rs.html5.currentsyncindex]&&rs.html5.audioelement.buffered&&0<rs.html5.audioelement.buffered.length&&rs.html5.synclist[rs.html5.currentsyncindex][0]<1E3*rs.html5.audioelement.buffered.end(0))rs.html5.state=rs.html5.STATE_USER_START_PLAYING,rs.html5.audioelement.play(),
setTimeout("rs.html5.refresh()",0);else if(rs.html5.synclist[rs.html5.currentsyncindex])if(20>=1*rs.html5.synclist[rs.html5.currentsyncindex][0]-1E3*rs.html5.audioelement.currentTime)setTimeout("rs.html5.refresh()",0);else{var a=1*rs.html5.synclist[rs.html5.currentsyncindex][0]-1E3*rs.html5.audioelement.currentTime-20;75<a?setTimeout("rs.html5.refresh()",75):0>a?setTimeout("rs.html5.refresh()",0):setTimeout("rs.html5.refresh()",a)}else setTimeout("rs.html5.refresh()",75);else rs.html5.state==rs.html5.STATE_USER_START_PLAYING&&
(rs.html5.synclist[rs.html5.currentsyncindex]&&1*rs.html5.synclist[rs.html5.currentsyncindex][0]-20<1E3*rs.html5.audioelement.currentTime&&(rshlsync(rs.html5.synclist[rs.html5.currentsyncindex][1],rs.html5.synclist[rs.html5.currentsyncindex][2]),rs.html5.currentsyncindex++),rs.html5.synclist[rs.html5.currentsyncindex]?20>=1*rs.html5.synclist[rs.html5.currentsyncindex][0]-1E3*rs.html5.audioelement.currentTime?setTimeout("rs.html5.refresh()",0):(a=1*rs.html5.synclist[rs.html5.currentsyncindex][0]-1E3*
rs.html5.audioelement.currentTime-20,75<a?setTimeout("rs.html5.refresh()",75):0>a?setTimeout("rs.html5.refresh()",0):setTimeout("rs.html5.refresh()",a)):setTimeout("rs.html5.refresh()",75))}},createStylesheet:function(){if(!document.styleSheets.rsstylesheet&&!document.getElementById("rsstylesheet")){var a=document.createElement("style");a.type="text/css";a.setAttribute("id","rsstylesheet");a.setAttribute("name","rsstylesheet");var b=document.getElementsByTagName("head"),c=null;0<b.length&&(c=b.item(0));
c&&(c.appendChild(a),a=parseInt(rs.settings.flash.height)+19,b=parseInt(rs.settings.flash.popupWidth)+35,changeCSSRule("#rs_playerarea","position: relative !important; border:1px solid #aeaeae !important; background:#ffffff !important; width: "+rs.data.getPhrase("playerwidth")+"px !important; height: "+a+"px !important; line-height: normal !important; font-style: normal !important;font-family:Arial !important;"),changeCSSRule("#rs_playerarea object","max-width: none !important;"),changeCSSRule("#closebr",
"border-style: none !important; margin: 0px !important; padding: 0px !important; "),changeCSSRule("#rs_popup_player","font-family: Arial !important; font-size: 13px !important; width: "+b+"px !important; height: "+rs.settings.flash.popupHeight+"px !important; position: absolute !important; border: 1px solid #aeaeae !important; z-index: 9000 !important; background: #fff !important; -moz-box-shadow: 2px 4px 6px #999 !important; -webkit-box-shadow: 2px 4px 6px #999 !important; -box-shadow: 2px 4px 6px #999 !important; line-height: normal !important;"),
changeCSSRule("#rs_popup_link a:hover","background-color: #a4cbff !important;"),changeCSSRule("#rs_selimg","position: absolute !important; border: 1px solid #aeaeae !important; z-index: 10000 !important; background: #fff !important; padding: 5px !important; -moz-box-shadow: 2px 4px 6px #999 !important; -webkit-box-shadow: 2px 4px 6px #999 !important; -box-shadow: 2px 4px 6px #999 !important; line-height: normal !important;"),changeCSSRule("#rspopup","position: absolute !important; z-index: 1000 !important; background: #fff !important; width: 342px !important; border-color: #a4cbff #aeaeae #aeaeae !important; border-right: 1px solid #aeaeae !important; border-style: solid !important; border-width: 1px !important; margin: 3px 3px 3px 0 !important; font-size: 12px !important; font-family: Arial !important; padding: 3px !important; -moz-box-shadow: 0 7px 6px #999 !important; -webkit-box-shadow: 0 7px 6px #999 !important; -box-shadow: 0 7px 6px #999 !important;"),
changeCSSRule(".rs_block","float: left !important; margin: 0 3px 0 0 !important; padding: 3px !important; border: 1px solid #ddd !important; width: 160px !important; background: none !important; clear: none !important; font-family: Arial !important;"),changeCSSRule(".rs_block legend","position: static !important; font-weight: bold !important; color: #000 !important; font-size: 12px !important; text-transform: none !important; letter-spacing: 0px !important; padding: 0px !important; font-style: inherit !important; font-family: Arial !important;"),
changeCSSRule(".rs_block ul","margin: 0 !important; padding: 0 !important; list-style: none !important; width: 100% !important; font-family: Arial !important;"),changeCSSRule(".rs_block li","padding: 0 !important; margin: 0 !important; width: 100% !important; background: none !important; list-style-image: none !important; list-style-type: none !important; font-family: Arial !important;"),changeCSSRule(".rs_block li a","text-align: left !important; border-style: none !important; display: block !important; padding: 5px 0 5px 20px !important; text-decoration: none !important; color: #000 !important; font-size: 12px !important; font-family: Arial !important; font-weight: normal !important; width: 87% !important;"),
changeCSSRule(".rs_block li a:hover","background: #eee !important;"),changeCSSRule(".rs_block li.rs_active","background-color: #A4CBFF !important; background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, rgb(144,192,240)), color-stop(0.79, rgb(229,237,255))) !important; background-image: -moz-linear-gradient(center bottom, rgb(144,192,240) 0%, rgb(229,237,255) 79%) !important;"),changeCSSRule(".rs_block li.rs_active a","background: transparent url("+rs.data.getImage("arrowSrc")+
") no-repeat scroll 10px center !important;"),changeCSSRule(".rs_block li.rs_active a:hover","background: transparent url("+rs.data.getImage("arrowSrc")+") no-repeat scroll 10px center !important;"),changeCSSRule("#bottomlinks","font-family: Arial !important;color:#333 !important;font-size:11px !important; margin: 2px 0 2px 0 !important;"),changeCSSRule("#bottomlinks a","color: #000 !important; border-style: none !important; text-decoration: none !important; padding: 2px; font-weight: normal !important; font-size:11px !important; font-family: Arial !important;"),
changeCSSRule("#bottomlinks a:hover","background-color: #a4cbff !important;"),changeCSSRule("a.rs_settings","padding-left: 17px !important; border-style: none !important; background: transparent url("+rs.data.getImage("settingsSrc")+") no-repeat 2px 2px !important;"),changeCSSRule(".sync_word_highlighted","background-color: "+rs.settings.wordColor+" !important; color: "+rs.settings.textColor+" !important;"),changeCSSRule(".sync_sent_highlighted","background-color: "+rs.settings.sentColor+" !important; color: "+
rs.settings.textColor+" !important;"),changeCSSRule("#timeline","position: absolute !important; top: 4px !important; left: 55px !important; height: 11px !important; background-color: #F4F4F4 !important; width: 170px !important; border: 1px solid #3380CC !important;"),changeCSSRule("#duration","position: relative !important; height: 11px !important; background-color: #92C0EF !important; width: 0px;"),changeCSSRule("#durationtxt","position: absolute !important; top: 1px !important; left: 0px !important; text-align: center !important; font-size: 10px !important; font-weight: bold !important; font-family: Helvetica !important; color: #003399 !important; line-height: 80% !important; width: 100% !important;"))}},
addEvents:function(){(-1<navigator.userAgent.toLowerCase().indexOf("iphone")||-1<navigator.userAgent.toLowerCase().indexOf("ipad")||-1<navigator.userAgent.toLowerCase().indexOf("ipod"))&&-1<navigator.vendor.toLowerCase().indexOf("apple")||-1<navigator.userAgent.toLowerCase().indexOf("android")?document.addEventListener("touchstart",function(){setTimeout(function(){rs.getSelectedHTML();return!1},50)},!1):(document.addEventListener("mousedown",function(a){setTimeout(function(){rs.popup.mousePress(a);
return!1},0)},!1),document.addEventListener("keydown",function(a){setTimeout(function(){rs.popup.mousePress(a);return!1},0)},!1),document.addEventListener("mouseup",function(a){setTimeout(function(){rs.copyselected(a);return!1},0)},!1),document.addEventListener("keyup",function(a){setTimeout(function(){rs.copyselected(a);return!1},0)},!1))}};
document.addEventListener?(rs.addEvents(),window.addEventListener("message",rs.html5.receiveMessage,!1,!0)):document.attachEvent?(document.attachEvent("onmousedown",rs.popup.mousePress),document.attachEvent("onkeydown",rs.popup.mousePress),document.attachEvent("onmouseup",rs.copyselected),document.attachEvent("onkeyup",rs.copyselected)):(document.onmousedown=rs.popup.mousePress,document.onkeydown=rs.popup.mousePress,document.onmouseup=rs.copyselected,document.onkeyup=rs.copyselected);
function readpage(a,b){rs.readpage(a,b)}function rshlsetContent(a){rs.rshlsetContent(a)}function rshlsetId(a){rs.rshlsetId(a)}function rshlinit(){rs.rshlinit()}function rshlsync(a,b){for(var c=a.split(","),d=b.split(","),e=0;e<a.length;e++)rs.rshlsync(c[e],d[e])}function rshlexit(){rs.rshlexit()}
function changeCSSRule(a,b){document.styleSheets.rsstylesheet?css=document.styleSheets.rsstylesheet:document.getElementById("rsstylesheet")&&(css=document.getElementById("rsstylesheet"));css.addRule?css.addRule(a,b):css.sheet.insertRule&&css.sheet.insertRule(a+" {"+b+"}",css.sheet.cssRules.length)};
